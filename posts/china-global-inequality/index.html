<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Carola Casti">
<meta name="dcterms.date" content="2024-01-08">

<title>Global inequality and the ‘China effect’</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-8a79a254b8e706d3c925cde0a310d4f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="index_files/libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="index_files/libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Global inequality and the ‘China effect’</h1>
  <div class="quarto-categories">
    <div class="quarto-category">ulikhet</div>
    <div class="quarto-category">vekst</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Carola Casti </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 8, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Global inequality can be decomposed into ‘between’- and ‘within’-country inequality. What insights can we get from this decomposition? What is the role of China in the trends in global inequality, and what are the implications for developing countries? Are we doomed to grow more unequal or can things change?</p>
<p><em>Carola Casti is an economist (PhD) and Senior Adviser in the Section for Statistics and Analysis.</em></p>
<p>Is the grass greener on the other side? In some parts of the world, it definitely is. Global inequality, defined as <em>‘inequality in real incomes between citizens of the world’</em> <span class="citation" data-cites="milanovic2005 ravallion2018inequality">(<a href="#ref-milanovic2005" role="doc-biblioref">Milanovic 2005</a>; <a href="#ref-ravallion2018inequality" role="doc-biblioref">Ravallion 2018</a>)</span> has gone through different phases in history. It is a fundamental concept that deals with progress—or setbacks—in global development and the well-being of societies worldwide.</p>
<section id="the-historical-phases-of-global-inequality" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-historical-phases-of-global-inequality">The historical phases of global inequality</h2>
<p>Global inequality has gone through different eras over the last centuries, which have reflected different stages of international development, as shown in <a href="#fig-figure1" class="quarto-xref">Figure&nbsp;1</a>, based on recent work by <span class="citation" data-cites="milanovic2022">Milanovic (<a href="#ref-milanovic2022" role="doc-biblioref">2022</a>)</span>, one of the pioneers in the inequality research field.</p>
<ul>
<li><p><strong>Phase 1</strong> 1820–1950: Sharp increase in global inequality (Industrial revolution, WW1, Great Depression).</p></li>
<li><p><strong>Phase 2</strong> 1950–2000: Sustained high level of global inequality (WW2 and US dominance).</p></li>
<li><p><strong>Phase 3</strong> Since 2000: Sharp decrease (China’s growth).</p></li>
</ul>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-figure1" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full" alt="A line graph of the global Gini in 1820--2018, showing the three phases of global inequality.">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-figure1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<a href="index_files/figure-html/fig-figure1-1.png" class="lightbox page-columns page-full" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;1: Global inequality, 1820–2018. Source: @milanovic2022."><img src="index_files/figure-html/fig-figure1-1.png" class="img-fluid figure-img column-body" alt="A line graph of the global Gini in 1820--2018, showing the three phases of global inequality." width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-figure1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Global inequality, 1820–2018. Source: <span class="citation" data-cites="milanovic2022">Milanovic (<a href="#ref-milanovic2022" role="doc-biblioref">2022</a>)</span>.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Global inequality can also be disaggregated into two different components (by exploiting the exact decomposable features of the Theil index)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<ol type="1">
<li><p><em>Between</em> inequality: inequality between (population-weighted) mean country incomes;</p></li>
<li><p><em>Within</em> inequality: a (population-weighted) sum of national inequalities.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p></li>
</ol>
</section>
<section id="what-drives-global-inequality" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-drives-global-inequality">What drives global inequality?</h2>
<p>The two components have played a different role over time in dictating the trend in global inequality (see <a href="#fig-figure2" class="quarto-xref">Figure&nbsp;2</a>). Initially, the <em>within component</em> (divergence in national income across individuals) was the main force. At the beginning of the 20th century, both components seemed to equally contribute to global inequality. As time went by, the <em>between component</em> has played a more crucial role in the overall trend of global inequality. Its overall decrease between 2010 and 2018 can be mainly attributed to the between component, while the within component has gradually started to rise again.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-figure2" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full" alt="A stacked bar chart showing the evolution of the two components of global inequality.">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-figure2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<a href="index_files/figure-html/fig-figure2-1.png" class="lightbox page-columns page-full" data-gallery="quarto-lightbox-gallery-2" title="Figure&nbsp;2: Decomposition of global inequality. Source: @milanovic2022."><img src="index_files/figure-html/fig-figure2-1.png" class="img-fluid figure-img column-body" alt="A stacked bar chart showing the evolution of the two components of global inequality." width="864"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-figure2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Decomposition of global inequality. Source: <span class="citation" data-cites="milanovic2022">Milanovic (<a href="#ref-milanovic2022" role="doc-biblioref">2022</a>)</span>.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-china-effect" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-china-effect">The China Effect</h2>
<p>The rise of China has been considered one of the driving forces in explaining the downward trend in global inequality in phase three, via the <em>between</em> component (<a href="#fig-figure3" class="quarto-xref">Figure&nbsp;3</a>). Before 1978, China was a poor economy, with a real per capita GDP being only one-fortieth of the US level <span class="citation" data-cites="zhu2012understanding">(<a href="#ref-zhu2012understanding" role="doc-biblioref">Zhu 2012</a>)</span>. As it started to grow much faster than other countries, its relevance in reducing global inequality has become stronger (captured by the dark green areas below the 0, on the horizontal line). China has experienced a rapid acceleration in growth (over 8 percent annual average growth), in a relatively short period of time (2005–2018), involving one fifth of global population. The country was growing fast, and even more importantly, faster than any other economies in the world. Big improvements in highly populated countries cannot go unnoticed, nor have negligible implications for the rest of the world.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-figure3" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full" alt="An area chart showing China's marginal contribution to global inequality via the 'between'-component, 1953-2020.">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-figure3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<a href="index_files/figure-html/fig-figure3-1.png" class="lightbox page-columns page-full" data-gallery="quarto-lightbox-gallery-3" title="Figure&nbsp;3: Marginal effect of China’s growth on the ‘between’-inequality component of global inequality. Source: @milanovic2022. Note: China’s growth contributed to reducing global inequality in years where the graph is below zero, and vice versa."><img src="index_files/figure-html/fig-figure3-1.png" class="img-fluid figure-img column-body" alt="An area chart showing China's marginal contribution to global inequality via the 'between'-component, 1953-2020." width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-figure3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Marginal effect of China’s growth on the ‘between’-inequality component of global inequality. Source: <span class="citation" data-cites="milanovic2022">Milanovic (<a href="#ref-milanovic2022" role="doc-biblioref">2022</a>)</span>. Note: China’s growth contributed to reducing global inequality in years where the graph is below zero, and vice versa.
</figcaption>
</figure>
</div>
</div>
</div>
<p>China’s unprecedent economic growth also benefited the poorest: millions of people escaped poverty. Between 2008 and 2018, 125 million of rural Chinese citizens left their spots in the global bottom quintile <span class="citation" data-cites="milanovic2022">(<a href="#ref-milanovic2022" role="doc-biblioref">Milanovic 2022</a>)</span>. The steady and sizable increase in mean income from an extremely low starting point contributed massively to reducing the between component of inequality, and global inequality as well, meaning a higher convergence in mean income across countries. However, as its economy has expanded (with an GDP per capita, in PPP terms, exceeding the world average), China’s influence on reducing global inequality has become gradually weaker, becoming nearly negligible in 2018.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a><sup>,</sup><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>But what about the <em>within</em> component? China has also contributed to its upward trend since the 1980s including, among the others, large countries such as the US, India, Russia <span class="citation" data-cites="ravallion2018inequality milanovic2022">(<a href="#ref-ravallion2018inequality" role="doc-biblioref">Ravallion 2018</a>; <a href="#ref-milanovic2022" role="doc-biblioref">Milanovic 2022</a>)</span>.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> We can think, then, of China’s pro-equality effect via the between component (mean income convergence across countries) and, at the same time, an inequality enhancing effect via the within component (between-convergence vs within-divergence). However, the impact of the between component has been stronger, meaning that China’s role for the period considered, has been, overall, more beneficial than harmful in this ‘equalizing’ process.</p>
</section>
<section id="the-reshuffling-of-the-global-bottom-quantiles" class="level2">
<h2 class="anchored" data-anchor-id="the-reshuffling-of-the-global-bottom-quantiles">The reshuffling of the global bottom quantiles</h2>
<p>Its benign role for global inequality (via the between component) seems, though, to have come to an end. However, its role for the reshuffling of global income positions has been, and still is, very relevant. China’s development has led to a ‘migration’ of the Chinese population, which does not belong anymore to the global bottom quintile. But who has taken, then, these empty slots? According to <span class="citation" data-cites="milanovic2022">Milanovic (<a href="#ref-milanovic2022" role="doc-biblioref">2022</a>)</span>, 4 out of 10 in the global bottom quartile (the poorest 25 percent of the global population) belong to the Indian subcontinent (India, Bangladesh, Pakistan). Therefore, the Chinese miracle has had important implications from a global distribution perspective by reshuffling the lowest tail. No spot in the global income distribution is static, even more in a situation where there are economies that grow considerably more than others. To provide an example, some of the rich countries’ lower parts of the income distribution already shifted down in terms of their global income position. Let’s take Italy as a case: according to <span class="citation" data-cites="milanovic2022">Milanovic (<a href="#ref-milanovic2022" role="doc-biblioref">2022, 25</a>)</span>, between 1988 and 2018, “<em>the bottom Italian decile has slipped by 20 global percentiles, the second and the third by respectively six and two. The other deciles were not affected as they tend to be above the part of the global distribution where the Chinese influence has been the strongest.</em>”</p>
<p>This has been also observed in countries like France and Germany (where the poorest decile has shifted down from the 81<sup>st</sup> global percentile in 1993 to 75<sup>th</sup> percentile in 2018). We have now a better overview of the global bottom reshuffling, but what about the composition in the global top 5 percent of the income distribution? Perhaps not surprisingly, the Global West (Western Europe, North America) plus Japan) have remained stable and anchored in their top position. Given its size and the development achieved so far, there is a risk that China’s future growth may also end up fuelling global inequality, if other economies don’t keep up its pace. We can think of a threshold effect above which China’s growth (holding other things equal) will eventually boost global inequality. This does not mean, though, that we should advocate for some countries to stop growing, but rather that some countries need to grow more and faster.</p>
</section>
<section id="what-is-the-role-of-developing-economies-in-all-this" class="level2">
<h2 class="anchored" data-anchor-id="what-is-the-role-of-developing-economies-in-all-this">What is the role of developing economies in all this?</h2>
<p>This likely pro-inequality role of China, via the between component, despite being relevant, does not represent, though, the main concern, from a pure (re-)distributional perspective. The between inequality component can, indeed, also be driven by the low-income countries, at the bottom of the distribution, that keep on lagging behind (even more in recent years).<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> This is worrisome and more harmful too, from a welfare perspective. In other words, thinking about the different drivers of the between inequality component is also important: it can worsen due to many concomitant factors, with some of them being more pressing than other from a development perspective. The Indian and the African continent play an important role for the future of global inequality. They must experience a quicker and more inclusive progress, growing at a higher speed than rich economies, to avoid a divergence over time in the between component. This is easier said than done, but not impossible. Development assistance can play a role in facilitating this catch-up process, by targeting those economies that are lagging behind in this process and bring them up to speed with targeted interventions in the attempt to reduce both components of inequality.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<p>Recent shocks such as Covid-19 and the economic repercussions of the war in Ukraine are all elements that have had (and still do have) profound consequences for global inequality <span class="citation" data-cites="deaton2021covid world2022poverty">(<a href="#ref-deaton2021covid" role="doc-biblioref">Deaton 2021</a>; <a href="#ref-world2022poverty" role="doc-biblioref">Bank 2022</a>)</span> with some economies being hit disproportionally more by them. The World Bank has estimated the effect of the pandemic on the global inequality, finding that the latter has experienced the largest increase since WWII, mainly driven by the between component. Within-country inequality has increased too, despite less than what initially expected during the pandemic. It had also been showing a gradual upward trend until 2018 (<a href="#fig-figure2" class="quarto-xref">Figure&nbsp;2</a>), suggesting the presence of wider income disparities within countries (including high-income economies).<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
<p>History has taught us that very disruptive shocks have turned, at times, into opportunities to figure things out, sparking a sort of creative disruption. The unexpected growth miracle of China should also serve as a powerful reminder that, despite the many challenges ahead, outstanding positive development paths can still emerge.</p>

</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-world2022poverty" class="csl-entry" role="listitem">
Bank, World. 2022. <span>“Poverty and Shared Prosperity 2022: Correcting Course.”</span> Washington, DC: World Bank.
</div>
<div id="ref-deaton2021covid" class="csl-entry" role="listitem">
Deaton, Angus. 2021. <span>“Covid-19 and Global Income Inequality.”</span> NBER Working Paper 28392. National Bureau of Economic Research.
</div>
<div id="ref-milanovic2005" class="csl-entry" role="listitem">
Milanovic, Branko. 2005. <em>Worlds Apart: Measuring International and Global Inequality</em>. Princeton: Princeton University Press.
</div>
<div id="ref-milanovic2022" class="csl-entry" role="listitem">
———. 2022. <span>“The Three Eras of Global Inequality, 1820–2020 with the Focus on the Past Thirty Years.”</span> Stone Center Working Paper 59. Stone Center on Socio-Economic Inequality.
</div>
<div id="ref-ravallion2018inequality" class="csl-entry" role="listitem">
Ravallion, Martin. 2018. <span>“Inequality and Globalization: A Review Essay.”</span> <em>Journal of Economic Literature</em> 56 (2): 620–42.
</div>
<div id="ref-zhu2012understanding" class="csl-entry" role="listitem">
Zhu, Xiaodong. 2012. <span>“Understanding China’s Growth: Past, Present, and Future.”</span> <em>Journal of Economic Perspectives</em> 26 (4): 103–24.
</div>
<div id="ref-zhuang2016" class="csl-entry" role="listitem">
Zhuang, Juzhong, and Li Shi. 2016. <span>“Understanding Recent Trends in Income Inequality in the People’s Republic of China.”</span> ADB Economics Working Paper 489. Asian Development Bank.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Milanovic uses the Theil L index, also known as mean log deviation.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><span class="citation" data-cites="milanovic2005">Milanovic (<a href="#ref-milanovic2005" role="doc-biblioref">2005</a>)</span> uses the terms “concept 2” and “concept 3” inequality for between and within inequality, respectively.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Many high-income economies were also severely impacted by the financial recession in 2008, thereby experiencing an economic slowdown. It is also important to mention that, over the period 1990–2020, the global reduction of extreme poor (2.15 USD) exceeded 800 million.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>In principle, though, it could still further reduce global inequality through the within component, under the condition that future growth will be concentrated only the lowest part of the urban and rural income distribution <span class="citation" data-cites="milanovic2022">(<a href="#ref-milanovic2022" role="doc-biblioref">Milanovic 2022</a>)</span>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Inequality calculated in PPP terms, which is the most common approach for country-living comparisons, is lower than the inequality measured in US dollars at market exchange rates.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>See also <span class="citation" data-cites="zhuang2016">Zhuang and Shi (<a href="#ref-zhuang2016" role="doc-biblioref">2016</a>)</span>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a href="https://blogs.worldbank.org/developmenttalk/global-income-inequality-and-covid-19-pandemic-three-charts">The World Bank has found</a> a sizable increase in the between inequality and a more limited one in the within component in the emerging market and developing economies in the aftermath of Covid-19.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>We may think that countries can exert a more direct control over the within component of inequality. However, it may still be relevant to closely monitor the ‘between’ component, as it is likely to play a more relevant role in shedding light on international migration patterns and international trade/integration.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>The within-country component is, though, likely to be systematically underestimated for a number of reasons <span class="citation" data-cites="ravallion2018inequality">(<a href="#ref-ravallion2018inequality" role="doc-biblioref">Ravallion 2018</a>)</span>: the rich are less likely to participate in household surveys (selective compliance), making them not entirely representative of the income distribution in a given country; there are also some concerns that some income sources, especially from capital, are heavily underreported in surveys.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>